let pokemonRepository=function(){let t=[];function e(e){"object"==typeof e&&"name"in e?(t.push(e),console.log("Add "+e.name+" to the list successfully.")):console.log("It is not complete pokemon data!")}function o(){return t}function n(t){pokemonRepository.loadDetails(t).then(function(){let e=t.imageUrl,o=t.name,n="Height: "+t.height;pokemonRepository.showModal(e,o,n)})}function a(){$("#exampleModal").modal("hide")}function i(){let t=document.createElement("div");t.innerText="Loading...",t.id="loading-message",t.style.position="fixed",t.style.top="0",t.style.left="0",document.body.appendChild(t)}function l(){let t=document.getElementById("loading-message");t&&t.remove()}return{add:e,getAll:o,getOne:function e(o){t.forEach(function(t){t.name===o&&console.log(t)})},addListItem:function t(e){let o=document.querySelector(".pokemon-list"),a=document.createElement("li"),i=document.createElement("button");i.innerText=e.name,i.classList.add("pokemon-list-button"),i.classList.add("btn"),i.classList.add("btn-success"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#exampleModal"),a.classList.add("list-group-item"),a.appendChild(i),o.appendChild(a),i.addEventListener("click",function(){n(e)})},loadList:function t(){return i(),fetch("https://pokeapi.co/api/v2/pokemon/").then(function(t){return t.json()}).then(function(t){t.results.forEach(function(t){let o={name:t.name,detailsUrl:t.url};e(o),console.log(o)}),l()}).catch(function(t){console.error(t),l()})},loadDetails:function t(e){i();let o=e.detailsUrl,n=[];return fetch(o).then(function(t){return t.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,t.types.forEach(function(t){n.push(t.type.name)}),e.types=n,l()}).catch(function(t){console.error(t),l()})},showModal:function t(e,o,n){$(".modal-content").empty();let i=$('<div class="modal-header"></div>'),l=$('<div class="row align-items-center"></div>'),s=$('<div class="col-auto"></div>'),d=$("<img>").attr("src",e).attr("alt",o+"'s picture").addClass("img-fluid");s.append(d);let c=$('<div class="col"></div>'),p=$('<h5 class="modal-title" id="exampleModalLabel">'+o+"</h5>");c.append(p),s.appendTo(l),c.appendTo(l);let r=$('<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>').on("click",a);i.append(l,r);let u=$('<div class="modal-body"></div>'),m=$("<p>").text(n);u.append(m);let h=$('<div class="modal-footer"></div>'),f=$('<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'),g=$('<button type="button" class="btn btn-primary">Save changes</button>');h.append(f,g),$(".modal-content").append(i,u,h),$("#exampleModal").modal("show")},showDetails:n,showLoadingMessage:i,hideLoadingMessage:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});